name: Check Docstrings and Run Tests

on:
  push:
    branches:
      - master
      - feature/workflow
  pull_request:
    branches:
      - master
      - feature/workflow
      jobs:
        build:
        
          runs-on: ubuntu-latest
      
          steps:
          - uses: actions/checkout@v2
      
          - name: Set up Python
            uses: actions/setup-python@v2
            with:
              python-version: '3.x'
      
          - name: Install dependencies
            run: |
              python -m pip install --upgrade pip
              pip install pytest pytest-cov pydocstyle darglint
      
          - name: Check docstrings (Numpy style)
            run: |
              pydocstyle --convention=numpy source
      
          - name: Check docstrings existence
            run: |
              darglint source
      
          - name: Run tests
            run: |
              pytest source/tests --cov=source